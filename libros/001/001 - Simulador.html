<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador de Inter√©s Compuesto üí∞</title>
    <style>
        /* Variables de color del tema principal (para referencia y uso aqu√≠) */
        :root {
            --primary-blue: #004A99;
            --button-blue: #005BAA;
            --text-color-dark: #1E293B; /* Texto oscuro para fondos claros */
            --white-ish: #F0F8FF;    /* Fondo de la "hoja" donde se carga esto */
            --border-color-themed: #59A9D9; /* Un azul claro para bordes y acentos */
            --light-blue-accent-for-results-bg-rgba: rgba(0, 74, 153, 0.05); /* Tinte azul muy claro */
            --focus-shadow-color-rgba: rgba(0, 74, 153, 0.25); /* Sombra de foco azulada */
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; /* Fuente consistente con el frame */
            margin: 0; /* Quitamos margen para que se ajuste al contenedor .loaded-html-content */
            padding: 0; /* Quitamos padding para que se ajuste al contenedor .loaded-html-content */
            background-color: transparent; /* CLAVE: Hace el fondo del body del juego transparente */
            color: var(--text-color-dark); /* Texto oscuro por defecto */
            display: flex; /* Mantenemos flex para centrar el .container si es necesario */
            flex-direction: column;
            align-items: center;
        }

        .container {
            background-color: transparent; /* CLAVE: El contenedor principal del juego tambi√©n transparente */
            padding: 10px; /* Un padding ligero, ya que .loaded-html-content ya tiene uno */
            border-radius: 0; /* Los bordes redondeados los da .loaded-html-content */
            box-shadow: none; /* Sin sombra propia, la da .loaded-html-content si se quiere */
            width: 100%;
            max-width: 600px; /* Un poco m√°s de ancho si se desea, o mantener el original */
        }

        h1 {
            color: var(--primary-blue); /* T√≠tulo con el azul principal */
            text-align: center;
            margin-bottom: 25px; /* Aumentar un poco el margen inferior */
            font-size: 1.6em; /* Ajustar tama√±o si es necesario */
            border-bottom: 2px solid var(--primary-blue); /* Opcional: un borde inferior */
            padding-bottom: 10px;
        }

        .input-group {
            margin-bottom: 18px; /* Un poco m√°s de espacio */
        }

        label {
            display: block;
            margin-bottom: 6px;
            font-weight: 600; /* Un poco m√°s de peso */
            color: var(--text-color-dark); /* Asegurar color oscuro */
        }

        input[type="number"], select {
            width: 100%; /* Ocupar todo el ancho disponible */
            padding: 10px;
            border: 1px solid var(--border-color-themed); /* Borde con color del tema */
            border-radius: 5px; /* Bordes un poco m√°s redondeados */
            box-sizing: border-box;
            background-color: #fff; /* Fondo blanco para el input */
            color: var(--text-color-dark);
            font-size: 1em;
        }
        input[type="number"]:focus, select:focus {
            border-color: var(--primary-blue);
            box-shadow: 0 0 0 0.2rem var(--focus-shadow-color-rgba);
            outline: none;
        }

        button {
            background-color: var(--button-blue);
            color: var(--white-ish); /* Texto claro para el bot√≥n */
            padding: 12px 20px;
            border: 1px solid var(--primary-blue); /* Borde con color del tema */
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em; /* Un poco m√°s grande */
            font-weight: 500;
            width: 100%;
            transition: background-color 0.2s ease, border-color 0.2s ease;
        }

        button:hover {
            background-color: var(--primary-blue);
            border-color: var(--button-blue);
        }

        .results {
            margin-top: 30px;
            padding: 20px;
            background-color: var(--light-blue-accent-for-results-bg-rgba); /* Fondo con tinte azul muy claro */
            border: 1px solid var(--border-color-themed);
            border-radius: 5px;
        }

        .results h2 {
            color: var(--primary-blue);
            margin-top: 0;
            border-bottom: 1px solid var(--border-color-themed);
            padding-bottom: 8px;
            font-size: 1.3em;
        }

        .results p {
            margin: 10px 0;
            font-size: 1.05em; /* Ligeramente m√°s peque√±o para encajar mejor */
            color: var(--text-color-dark);
        }

        .results span { /* Para los montos en los resultados */
            font-weight: bold;
            color: var(--button-blue); /* Usar el azul del bot√≥n para destacar */
        }

        .year-breakdown {
            margin-top: 20px;
            max-height: 180px; /* Ajustar altura si es necesario */
            overflow-y: auto;
            border: 1px solid var(--border-color-themed);
            padding: 15px;
            font-size: 0.95em;
            border-radius: 4px;
            background-color: rgba(255,255,255,0.5); /* Un blanco semi-transparente */
        }

        .year-breakdown h3 { /* Estilo para el t√≠tulo del desglose */
            margin-top: 0;
            margin-bottom: 10px;
            color: var(--primary-blue);
            font-size: 1.1em;
        }

        .year-breakdown div {
            padding: 4px 0;
            border-bottom: 1px dashed #ccc; /* L√≠nea divisoria m√°s sutil */
            color: var(--text-color-dark);
        }

        .year-breakdown div:last-child {
            border-bottom: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Simulador de Inter√©s Compuesto üìà</h1>

        <div class="input-group">
            <label for="initialInvestment">Inversi√≥n Inicial (‚Ç¨):</label>
            <input type="number" id="initialInvestment" value="1000" min="0">
        </div>

        <div class="input-group">
            <label for="annualInterestRate">Tasa de Inter√©s Anual (%):</label>
            <input type="number" id="annualInterestRate" value="7" min="0" step="0.1">
        </div>

        <div class="input-group">
            <label for="years">N√∫mero de A√±os:</label>
            <input type="number" id="years" value="10" min="1">
        </div>

        <div class="input-group">
            <label for="contributionAmount">Aporte Adicional (‚Ç¨):</label>
            <input type="number" id="contributionAmount" value="100" min="0">
        </div>

        <div class="input-group">
            <label for="contributionFrequency">Frecuencia del Aporte:</label>
            <select id="contributionFrequency">
                <option value="monthly">Mensual</option>
                <option value="annually">Anual</option>
            </select>
        </div>

        <button onclick="calculateCompoundInterest()">Simular ‚ú®</button>

        <div class="results" id="resultsArea" style="display:none;">
            <h2>Resultados de la Simulaci√≥n:</h2>
            <p>Saldo Final: <span id="finalBalance"></span></p>
            <p>Total de Aportes: <span id="totalContributions"></span></p>
            <p>Total de Intereses Ganados: <span id="totalInterest"></span></p>
            <div class="year-breakdown" id="yearBreakdown">
                </div>
        </div>
    </div>

    <script>
        function formatCurrency(amount) {
            return new Intl.NumberFormat('es-ES', { style: 'currency', currency: 'EUR' }).format(amount);
        }

        function calculateCompoundInterest() {
            // Obtener valores de los inputs
            const initialInvestment = parseFloat(document.getElementById('initialInvestment').value) || 0;
            const annualInterestRate = parseFloat(document.getElementById('annualInterestRate').value) / 100 || 0;
            const years = parseInt(document.getElementById('years').value) || 0;
            const contributionAmount = parseFloat(document.getElementById('contributionAmount').value) || 0;
            const contributionFrequency = document.getElementById('contributionFrequency').value;

            if (years <= 0) {
                alert("El n√∫mero de a√±os debe ser mayor que cero.");
                return;
            }

            let currentBalance = initialInvestment;
            let totalContributionsMade = initialInvestment; 
            let yearBreakdownHTML = "<h3>Desglose Anual:</h3>";

            // C√°lculo correcto de aportes totales y balance
            let periodicContributionsTotal = 0;

            for (let i = 1; i <= years; i++) {
                let yearlyContributionThisYear = 0;
                if (contributionAmount > 0) {
                    if (contributionFrequency === 'monthly') {
                        // Asumimos aportes al final del mes, inter√©s se calcula sobre balance + aportes del a√±o
                        for (let month = 0; month < 12; month++) {
                             // Opci√≥n 1: Inter√©s se compone despu√©s de cada aporte mensual (m√°s complejo)
                             // currentBalance += contributionAmount;
                             // currentBalance *= (1 + annualInterestRate / 12); 
                             // Por simplicidad, sumamos aportes y luego inter√©s anual
                            currentBalance += contributionAmount; // Suma directa
                            yearlyContributionThisYear += contributionAmount;
                        }
                    } else { // Annually (asumimos aporte al principio del a√±o o antes del c√°lculo de inter√©s)
                        currentBalance += contributionAmount;
                        yearlyContributionThisYear = contributionAmount;
                    }
                }
                periodicContributionsTotal += yearlyContributionThisYear;
                
                const interestEarnedThisYear = currentBalance * annualInterestRate;
                currentBalance += interestEarnedThisYear;

                yearBreakdownHTML += `<div>A√±o ${i}: Saldo ${formatCurrency(currentBalance)} (Inter√©s ganado: ${formatCurrency(interestEarnedThisYear)})</div>`;
            }
            
            // Ajustar totalContributionsMade para que solo sume inversi√≥n inicial + aportes peri√≥dicos
            totalContributionsMade = initialInvestment + periodicContributionsTotal;
            const totalInterestEarned = currentBalance - totalContributionsMade;

            document.getElementById('finalBalance').textContent = formatCurrency(currentBalance);
            document.getElementById('totalContributions').textContent = formatCurrency(totalContributionsMade);
            document.getElementById('totalInterest').textContent = formatCurrency(totalInterestEarned);
            document.getElementById('yearBreakdown').innerHTML = yearBreakdownHTML;
            document.getElementById('resultsArea').style.display = 'block';
        }
    </script>
</body>
</html>
