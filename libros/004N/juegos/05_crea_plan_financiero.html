<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crea tu Plan Financiero</title>
    <link rel="stylesheet" href="../style.css">
    <style>
        .game-container {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .plan-form {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        .form-group {
            margin: 1rem 0;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: bold;
            color: #333;
        }
        .form-group input, .form-group select, .form-group textarea {
            width: 100%;
            padding: 0.75rem;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
        }
        .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
            outline: none;
            border-color: #667eea;
        }
        .plan-preview {
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            border-radius: 12px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }
        .plan-section {
            background: white;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            color: #333;
        }
        .btn {
            background: #667eea;
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background 0.3s ease;
            margin: 0.5rem;
        }
        .btn:hover {
            background: #5a6fd8;
        }
        .btn-success {
            background: #28a745;
        }
        .btn-success:hover {
            background: #218838;
        }
        .tips {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>📝 Crea tu Plan Financiero</h1>
        <p>¡Diseña tu propio plan financiero personalizado! Este juego te ayudará a crear un plan realista para tus metas financieras.</p>

        <div class="game-container">
            <h2>🎯 Paso 1: Define tus Metas</h2>
            <div class="plan-form">
                <div class="form-group">
                    <label for="shortGoal">Meta a Corto Plazo (1-2 años):</label>
                    <input type="text" id="shortGoal" placeholder="Ej: Comprar una bicicleta nueva">
                </div>
                
                <div class="form-group">
                    <label for="shortAmount">¿Cuánto cuesta?</label>
                    <input type="number" id="shortAmount" placeholder="Ej: 500">
                </div>
                
                <div class="form-group">
                    <label for="mediumGoal">Meta a Mediano Plazo (3-5 años):</label>
                    <input type="text" id="mediumGoal" placeholder="Ej: Ahorrar para la universidad">
                </div>
                
                <div class="form-group">
                    <label for="mediumAmount">¿Cuánto cuesta?</label>
                    <input type="number" id="mediumAmount" placeholder="Ej: 5000">
                </div>
                
                <div class="form-group">
                    <label for="longGoal">Meta a Largo Plazo (10+ años):</label>
                    <input type="text" id="longGoal" placeholder="Ej: Comprar una casa">
                </div>
                
                <div class="form-group">
                    <label for="longAmount">¿Cuánto cuesta?</label>
                    <input type="number" id="longAmount" placeholder="Ej: 100000">
                </div>
            </div>
        </div>

        <div class="game-container">
            <h2>💰 Paso 2: Analiza tus Ingresos y Gastos</h2>
            <div class="plan-form">
                <div class="form-group">
                    <label for="income">Ingresos Mensuales (mesada, trabajo, etc.):</label>
                    <input type="number" id="income" placeholder="Ej: 200">
                </div>
                
                <div class="form-group">
                    <label for="expenses">Gastos Mensuales:</label>
                    <input type="number" id="expenses" placeholder="Ej: 150">
                </div>
                
                <div class="form-group">
                    <label for="savings">¿Cuánto puedes ahorrar al mes?</label>
                    <input type="number" id="savings" placeholder="Ej: 50">
                </div>
            </div>
        </div>

        <div class="game-container">
            <h2>🎯 Paso 3: Estrategia de Inversión</h2>
            <div class="plan-form">
                <div class="form-group">
                    <label for="riskTolerance">¿Qué tan arriesgado quieres ser?</label>
                    <select id="riskTolerance">
                        <option value="conservador">Conservador (poco riesgo)</option>
                        <option value="moderado">Moderado (riesgo medio)</option>
                        <option value="agresivo">Agresivo (más riesgo)</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="investmentStrategy">Estrategia de Inversión:</label>
                    <textarea id="investmentStrategy" rows="4" placeholder="Describe tu estrategia de inversión..."></textarea>
                </div>
            </div>
        </div>

        <div class="game-container">
            <h2>📋 Paso 4: Plan de Acción</h2>
            <div class="plan-form">
                <div class="form-group">
                    <label for="actionPlan">Plan de Acción Semanal:</label>
                    <textarea id="actionPlan" rows="6" placeholder="¿Qué harás cada semana para alcanzar tus metas?"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="obstacles">Posibles Obstáculos:</label>
                    <textarea id="obstacles" rows="4" placeholder="¿Qué podría impedirte alcanzar tus metas?"></textarea>
                </div>
                
                <div class="form-group">
                    <label for="solutions">Soluciones:</label>
                    <textarea id="solutions" rows="4" placeholder="¿Cómo superarás estos obstáculos?"></textarea>
                </div>
            </div>
        </div>

        <button class="btn btn-success" onclick="generatePlan()">🚀 Generar mi Plan Financiero</button>

        <div class="game-container" id="planResult" style="display: none;">
            <h2>📊 Tu Plan Financiero Personalizado</h2>
            
            <div class="plan-preview">
                <h3>🎯 Tus Metas</h3>
                <div class="plan-section">
                    <h4>Meta a Corto Plazo:</h4>
                    <p id="displayShortGoal"></p>
                    <p><strong>Costo:</strong> $<span id="displayShortAmount"></span></p>
                    <p><strong>Tiempo estimado:</strong> <span id="shortTime"></span></p>
                </div>
                
                <div class="plan-section">
                    <h4>Meta a Mediano Plazo:</h4>
                    <p id="displayMediumGoal"></p>
                    <p><strong>Costo:</strong> $<span id="displayMediumAmount"></span></p>
                    <p><strong>Tiempo estimado:</strong> <span id="mediumTime"></span></p>
                </div>
                
                <div class="plan-section">
                    <h4>Meta a Largo Plazo:</h4>
                    <p id="displayLongGoal"></p>
                    <p><strong>Costo:</strong> $<span id="displayLongAmount"></span></p>
                    <p><strong>Tiempo estimado:</strong> <span id="longTime"></span></p>
                </div>
            </div>
            
            <div class="plan-preview">
                <h3>💰 Análisis Financiero</h3>
                <div class="plan-section">
                    <p><strong>Ingresos mensuales:</strong> $<span id="displayIncome"></span></p>
                    <p><strong>Gastos mensuales:</strong> $<span id="displayExpenses"></span></p>
                    <p><strong>Ahorro mensual:</strong> $<span id="displaySavings"></span></p>
                    <p><strong>Porcentaje de ahorro:</strong> <span id="savingsPercentage"></span>%</p>
                </div>
            </div>
            
            <div class="plan-preview">
                <h3>📈 Estrategia de Inversión</h3>
                <div class="plan-section">
                    <p><strong>Perfil de riesgo:</strong> <span id="displayRisk"></span></p>
                    <p><strong>Estrategia:</strong> <span id="displayStrategy"></span></p>
                </div>
            </div>
            
            <div class="plan-preview">
                <h3>📋 Plan de Acción</h3>
                <div class="plan-section">
                    <p><strong>Acciones semanales:</strong></p>
                    <p id="displayActionPlan"></p>
                    
                    <p><strong>Obstáculos identificados:</strong></p>
                    <p id="displayObstacles"></p>
                    
                    <p><strong>Soluciones:</strong></p>
                    <p id="displaySolutions"></p>
                </div>
            </div>
            
            <div class="tips">
                <h3>💡 Consejos para tu Plan:</h3>
                <ul>
                    <li><strong>Automatiza:</strong> Configura transferencias automáticas a tu cuenta de ahorros</li>
                    <li><strong>Revisa mensualmente:</strong> Ajusta tu plan según tus progresos</li>
                    <li><strong>Celebra los logros:</strong> Recompénsate cuando alcances metas pequeñas</li>
                    <li><strong>Mantén el enfoque:</strong> Recuerda por qué empezaste</li>
                    <li><strong>Busca ayuda:</strong> Habla con tus padres o un asesor financiero</li>
                </ul>
            </div>
            
            <button class="btn" onclick="savePlan()">💾 Guardar Plan</button>
            <button class="btn" onclick="printPlan()">🖨️ Imprimir Plan</button>
            <button class="btn" onclick="restartPlan()">🔄 Crear Nuevo Plan</button>
        </div>

    </div>

    <script>
        function generatePlan() {
            // Obtener valores del formulario
            const shortGoal = document.getElementById('shortGoal').value;
            const shortAmount = parseFloat(document.getElementById('shortAmount').value) || 0;
            const mediumGoal = document.getElementById('mediumGoal').value;
            const mediumAmount = parseFloat(document.getElementById('mediumAmount').value) || 0;
            const longGoal = document.getElementById('longGoal').value;
            const longAmount = parseFloat(document.getElementById('longAmount').value) || 0;
            
            const income = parseFloat(document.getElementById('income').value) || 0;
            const expenses = parseFloat(document.getElementById('expenses').value) || 0;
            const savings = parseFloat(document.getElementById('savings').value) || 0;
            
            const riskTolerance = document.getElementById('riskTolerance').value;
            const strategy = document.getElementById('investmentStrategy').value;
            const actionPlan = document.getElementById('actionPlan').value;
            const obstacles = document.getElementById('obstacles').value;
            const solutions = document.getElementById('solutions').value;
            
            // Validar que se hayan llenado los campos principales
            if (!shortGoal || !income || !savings) {
                alert('Por favor llena al menos tus metas principales, ingresos y ahorros.');
                return;
            }
            
            // Calcular tiempos estimados
            const shortTime = savings > 0 ? Math.ceil(shortAmount / savings) : 'Indefinido';
            const mediumTime = savings > 0 ? Math.ceil(mediumAmount / savings) : 'Indefinido';
            const longTime = savings > 0 ? Math.ceil(longAmount / savings) : 'Indefinido';
            
            // Calcular porcentaje de ahorro
            const savingsPercentage = income > 0 ? Math.round((savings / income) * 100) : 0;
            
            // Mostrar resultados
            document.getElementById('displayShortGoal').textContent = shortGoal;
            document.getElementById('displayShortAmount').textContent = shortAmount.toLocaleString();
            document.getElementById('shortTime').textContent = typeof shortTime === 'number' ? `${shortTime} meses` : shortTime;
            
            document.getElementById('displayMediumGoal').textContent = mediumGoal;
            document.getElementById('displayMediumAmount').textContent = mediumAmount.toLocaleString();
            document.getElementById('mediumTime').textContent = typeof mediumTime === 'number' ? `${mediumTime} meses` : mediumTime;
            
            document.getElementById('displayLongGoal').textContent = longGoal;
            document.getElementById('displayLongAmount').textContent = longAmount.toLocaleString();
            document.getElementById('longTime').textContent = typeof longTime === 'number' ? `${longTime} meses` : longTime;
            
            document.getElementById('displayIncome').textContent = income.toLocaleString();
            document.getElementById('displayExpenses').textContent = expenses.toLocaleString();
            document.getElementById('displaySavings').textContent = savings.toLocaleString();
            document.getElementById('savingsPercentage').textContent = savingsPercentage;
            
            document.getElementById('displayRisk').textContent = riskTolerance.charAt(0).toUpperCase() + riskTolerance.slice(1);
            document.getElementById('displayStrategy').textContent = strategy || 'No especificada';
            document.getElementById('displayActionPlan').textContent = actionPlan || 'No especificado';
            document.getElementById('displayObstacles').textContent = obstacles || 'No especificados';
            document.getElementById('displaySolutions').textContent = solutions || 'No especificadas';
            
            // Mostrar resultado
            document.getElementById('planResult').style.display = 'block';
            
            // Scroll al resultado
            document.getElementById('planResult').scrollIntoView({ behavior: 'smooth' });
        }
        
        function savePlan() {
            const planData = {
                shortGoal: document.getElementById('shortGoal').value,
                mediumGoal: document.getElementById('mediumGoal').value,
                longGoal: document.getElementById('longGoal').value,
                income: document.getElementById('income').value,
                savings: document.getElementById('savings').value,
                riskTolerance: document.getElementById('riskTolerance').value,
                strategy: document.getElementById('investmentStrategy').value,
                actionPlan: document.getElementById('actionPlan').value,
                date: new Date().toLocaleDateString()
            };
            
            localStorage.setItem('financialPlan', JSON.stringify(planData));
            alert('¡Plan guardado exitosamente! Puedes recuperarlo más tarde.');
        }
        
        function printPlan() {
            window.print();
        }
        
        function restartPlan() {
            // Limpiar formulario
            document.querySelectorAll('input, select, textarea').forEach(element => {
                element.value = '';
            });
            
            // Ocultar resultado
            document.getElementById('planResult').style.display = 'none';
            
            // Scroll al inicio
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }
        
        // Cargar plan guardado si existe
        window.onload = function() {
            const savedPlan = localStorage.getItem('financialPlan');
            if (savedPlan) {
                const plan = JSON.parse(savedPlan);
                document.getElementById('shortGoal').value = plan.shortGoal || '';
                document.getElementById('mediumGoal').value = plan.mediumGoal || '';
                document.getElementById('longGoal').value = plan.longGoal || '';
                document.getElementById('income').value = plan.income || '';
                document.getElementById('savings').value = plan.savings || '';
                document.getElementById('riskTolerance').value = plan.riskTolerance || 'moderado';
                document.getElementById('investmentStrategy').value = plan.strategy || '';
                document.getElementById('actionPlan').value = plan.actionPlan || '';
            }
        };
    </script>
</body>
</html> 