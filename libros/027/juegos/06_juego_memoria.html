<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de Memoria Neuropl√°stica - El Cerebro se Cambia a S√≠ Mismo</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
        }
        .header {
            text-align: center;
            margin-bottom: 30px;
        }
        .header h1 {
            color: #667eea;
            font-size: 2.5em;
            margin: 0;
        }
        .header p {
            color: #666;
            font-size: 1.2em;
            margin: 10px 0 0 0;
        }
        .game-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #667eea;
        }
        .game-section h3 {
            color: #667eea;
            margin-top: 0;
        }
        .memory-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            margin: 20px 0;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }
        .memory-card {
            background: #e9ecef;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid #e9ecef;
            font-size: 2em;
            min-height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .memory-card:hover {
            background: #dee2e6;
        }
        .memory-card.flipped {
            background: #667eea;
            color: white;
        }
        .memory-card.matched {
            background: #28a745;
            color: white;
        }
        .memory-card.wrong {
            background: #dc3545;
            color: white;
        }
        .btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 12px 25px;
            border: none;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            transition: transform 0.3s;
            margin: 10px 5px;
        }
        .btn:hover {
            transform: translateY(-2px);
        }
        .btn-secondary {
            background: #6c757d;
        }
        .btn-success {
            background: #28a745;
        }
        .btn-danger {
            background: #dc3545;
        }
        .game-info {
            background: #e7f3ff;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #0056b3;
        }
        .game-info h3 {
            color: #0056b3;
            margin-top: 0;
        }
        .stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        .stat-card {
            background: white;
            padding: 20px;
            border-radius: 10px;
            text-align: center;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .stat-card h4 {
            color: #667eea;
            margin: 0 0 10px 0;
        }
        .stat-card .number {
            font-size: 2em;
            font-weight: bold;
            color: #333;
        }
        .timer {
            background: #fff3cd;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #ffc107;
            text-align: center;
        }
        .timer h4 {
            color: #856404;
            margin-top: 0;
        }
        .timer-display {
            font-size: 2em;
            font-weight: bold;
            color: #667eea;
        }
        .tip-box {
            background: #e7f3ff;
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            border-left: 4px solid #0056b3;
        }
        .tip-box h4 {
            color: #0056b3;
            margin-top: 0;
        }
        .difficulty-selector {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #6c757d;
        }
        .difficulty-selector h3 {
            color: #495057;
            margin-top: 0;
        }
        .difficulty-option {
            background: white;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
            border: 2px solid #e9ecef;
            cursor: pointer;
            transition: all 0.3s;
        }
        .difficulty-option:hover {
            border-color: #667eea;
        }
        .difficulty-option.selected {
            border-color: #667eea;
            background: #f0f4ff;
        }
        .difficulty-option h4 {
            color: #667eea;
            margin-top: 0;
        }
        .difficulty-option p {
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üß© Juego de Memoria Neuropl√°stica</h1>
            <p>Fortalece tu memoria a trav√©s del juego</p>
        </div>

        <div class="tip-box">
            <h4>üß† ¬øPor qu√© es importante el juego de memoria?</h4>
            <p>El juego de memoria es una excelente manera de ejercitar tu cerebro y mejorar la neuroplasticidad. Al jugar regularmente, puedes fortalecer las conexiones neuronales relacionadas con la memoria y la concentraci√≥n.</p>
        </div>

        <div class="difficulty-selector">
            <h3>üéØ Selecciona la Dificultad</h3>
            <p>Elige el nivel de dificultad que mejor se adapte a tu nivel actual:</p>
            
            <div class="difficulty-option" onclick="selectDifficulty('easy')">
                <h4>üü¢ F√°cil</h4>
                <p>4x4 grid - 8 parejas - Ideal para principiantes</p>
            </div>
            
            <div class="difficulty-option" onclick="selectDifficulty('medium')">
                <h4>üü° Medio</h4>
                <p>4x4 grid - 8 parejas - Nivel intermedio</p>
            </div>
            
            <div class="difficulty-option" onclick="selectDifficulty('hard')">
                <h4>üî¥ Dif√≠cil</h4>
                <p>6x6 grid - 18 parejas - Para expertos</p>
            </div>
        </div>

        <div class="game-section" id="game-section" style="display: none;">
            <h3>üéÆ Juego de Memoria</h3>
            <div class="timer">
                <h4>‚è∞ Tiempo</h4>
                <div class="timer-display" id="timer-display">00:00</div>
            </div>
            <div class="memory-grid" id="memory-grid"></div>
            <div style="text-align: center; margin-top: 20px;">
                <button class="btn" onclick="startGame()" id="start-btn">‚ñ∂Ô∏è Comenzar Juego</button>
                <button class="btn btn-secondary" onclick="pauseGame()" id="pause-btn" style="display: none;">‚è∏Ô∏è Pausar</button>
                <button class="btn btn-danger" onclick="stopGame()" id="stop-btn" style="display: none;">‚èπÔ∏è Detener</button>
            </div>
        </div>

        <div class="game-info" id="game-info" style="display: none;">
            <h3>üìä Informaci√≥n del Juego</h3>
            <div class="stats">
                <div class="stat-card">
                    <h4>Parejas Encontradas</h4>
                    <div class="number" id="pairs-found">0</div>
                </div>
                <div class="stat-card">
                    <h4>Movimientos</h4>
                    <div class="number" id="moves">0</div>
                </div>
                <div class="stat-card">
                    <h4>Precisi√≥n</h4>
                    <div class="number" id="accuracy">0%</div>
                </div>
                <div class="stat-card">
                    <h4>Puntuaci√≥n</h4>
                    <div class="number" id="score">0</div>
                </div>
            </div>
        </div>

        <div class="stats" id="stats" style="display: none;">
            <div class="stat-card">
                <h4>Juegos Completados</h4>
                <div class="number" id="games-completed">0</div>
            </div>
            <div class="stat-card">
                <h4>Mejor Tiempo</h4>
                <div class="number" id="best-time">-</div>
            </div>
            <div class="stat-card">
                <h4>Puntuaci√≥n Promedio</h4>
                <div class="number" id="average-score">0</div>
            </div>
            <div class="stat-card">
                <h4>Racha Actual</h4>
                <div class="number" id="current-streak">0 d√≠as</div>
            </div>
        </div>

        <div style="text-align: center; margin-top: 30px;">
            <button class="btn" onclick="viewStats()" id="stats-btn" style="display: none;">üìä Ver Estad√≠sticas</button>
            <button class="btn btn-success" onclick="saveGame()" id="save-btn" style="display: none;">üíæ Guardar Juego</button>
            <button class="btn btn-secondary" onclick="resetGame()">üîÑ Reiniciar</button>
        </div>
    </div>

    <script>
        let currentDifficulty = null;
        let gameTimer = null;
        let gameStartTime = null;
        let gameTime = 0;
        let isPaused = false;
        let gameData = JSON.parse(localStorage.getItem('memoryGameData') || '[]');
        let gameState = {
            cards: [],
            flippedCards: [],
            matchedPairs: 0,
            moves: 0,
            isGameActive: false
        };

        const difficulties = {
            'easy': {
                gridSize: 4,
                pairs: 8,
                symbols: ['üß†', 'üí°', '‚ö°', 'üéØ', 'üöÄ', 'üåü', 'üí´', 'üé®']
            },
            'medium': {
                gridSize: 4,
                pairs: 8,
                symbols: ['üß†', 'üí°', '‚ö°', 'üéØ', 'üöÄ', 'üåü', 'üí´', 'üé®']
            },
            'hard': {
                gridSize: 6,
                pairs: 18,
                symbols: ['üß†', 'üí°', '‚ö°', 'üéØ', 'üöÄ', 'üåü', 'üí´', 'üé®', 'üî¨', 'üé≠', 'üé™', 'üé®', 'üéµ', 'üé∏', 'üéπ', 'üé∫', 'üéª', 'ü•Å']
            }
        };

        function selectDifficulty(difficulty) {
            currentDifficulty = difficulty;
            
            // Remover selecci√≥n anterior
            document.querySelectorAll('.difficulty-option').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Seleccionar nueva dificultad
            event.currentTarget.classList.add('selected');
            
            // Mostrar secci√≥n del juego
            document.getElementById('game-section').style.display = 'block';
            
            // Configurar grid
            setupGrid();
        }

        function setupGrid() {
            const difficulty = difficulties[currentDifficulty];
            const grid = document.getElementById('memory-grid');
            
            // Limpiar grid
            grid.innerHTML = '';
            
            // Configurar grid
            grid.style.gridTemplateColumns = `repeat(${difficulty.gridSize}, 1fr)`;
            
            // Crear cartas
            const cards = [];
            for (let i = 0; i < difficulty.pairs; i++) {
                cards.push({
                    id: i,
                    symbol: difficulty.symbols[i],
                    isFlipped: false,
                    isMatched: false
                });
                cards.push({
                    id: i + difficulty.pairs,
                    symbol: difficulty.symbols[i],
                    isFlipped: false,
                    isMatched: false
                });
            }
            
            // Mezclar cartas
            cards.sort(() => Math.random() - 0.5);
            
            // Crear elementos HTML
            cards.forEach((card, index) => {
                const cardElement = document.createElement('div');
                cardElement.className = 'memory-card';
                cardElement.textContent = '?';
                cardElement.dataset.cardId = index;
                cardElement.onclick = () => flipCard(index);
                grid.appendChild(cardElement);
            });
            
            // Guardar estado del juego
            gameState.cards = cards;
            gameState.flippedCards = [];
            gameState.matchedPairs = 0;
            gameState.moves = 0;
            gameState.isGameActive = false;
        }

        function startGame() {
            if (!currentDifficulty) return;
            
            gameState.isGameActive = true;
            gameStartTime = Date.now();
            gameTime = 0;
            
            document.getElementById('start-btn').style.display = 'none';
            document.getElementById('pause-btn').style.display = 'inline-block';
            document.getElementById('stop-btn').style.display = 'inline-block';
            document.getElementById('game-info').style.display = 'block';
            
            // Iniciar timer
            gameTimer = setInterval(() => {
                if (!isPaused) {
                    gameTime = Math.floor((Date.now() - gameStartTime) / 1000);
                    updateTimer();
                }
            }, 1000);
        }

        function pauseGame() {
            isPaused = !isPaused;
            document.getElementById('pause-btn').textContent = isPaused ? '‚ñ∂Ô∏è Continuar' : '‚è∏Ô∏è Pausar';
        }

        function stopGame() {
            if (confirm('¬øEst√°s seguro de que quieres detener el juego?')) {
                clearInterval(gameTimer);
                gameTimer = null;
                resetGame();
            }
        }

        function flipCard(cardIndex) {
            if (!gameState.isGameActive || isPaused) return;
            
            const card = gameState.cards[cardIndex];
            if (card.isFlipped || card.isMatched) return;
            
            // Voltear carta
            card.isFlipped = true;
            gameState.flippedCards.push(cardIndex);
            
            // Actualizar UI
            const cardElement = document.querySelector(`[data-card-id="${cardIndex}"]`);
            cardElement.textContent = card.symbol;
            cardElement.classList.add('flipped');
            
            // Verificar si hay dos cartas volteadas
            if (gameState.flippedCards.length === 2) {
                gameState.moves++;
                updateStats();
                
                const [firstIndex, secondIndex] = gameState.flippedCards;
                const firstCard = gameState.cards[firstIndex];
                const secondCard = gameState.cards[secondIndex];
                
                if (firstCard.symbol === secondCard.symbol) {
                    // Pareja encontrada
                    firstCard.isMatched = true;
                    secondCard.isMatched = true;
                    gameState.matchedPairs++;
                    
                    // Marcar como matched
                    document.querySelector(`[data-card-id="${firstIndex}"]`).classList.add('matched');
                    document.querySelector(`[data-card-id="${secondIndex}"]`).classList.add('matched');
                    
                    // Limpiar cartas volteadas
                    gameState.flippedCards = [];
                    
                    // Verificar si el juego termin√≥
                    if (gameState.matchedPairs === difficulties[currentDifficulty].pairs) {
                        completeGame();
                    }
                } else {
                    // No es pareja, voltear de vuelta despu√©s de un momento
                    setTimeout(() => {
                        firstCard.isFlipped = false;
                        secondCard.isFlipped = false;
                        gameState.flippedCards = [];
                        
                        document.querySelector(`[data-card-id="${firstIndex}"]`).textContent = '?';
                        document.querySelector(`[data-card-id="${firstIndex}"]`).classList.remove('flipped');
                        document.querySelector(`[data-card-id="${secondIndex}"]`).textContent = '?';
                        document.querySelector(`[data-card-id="${secondIndex}"]`).classList.remove('flipped');
                    }, 1000);
                }
            }
        }

        function updateTimer() {
            const minutes = Math.floor(gameTime / 60);
            const seconds = gameTime % 60;
            document.getElementById('timer-display').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        function updateStats() {
            document.getElementById('pairs-found').textContent = gameState.matchedPairs;
            document.getElementById('moves').textContent = gameState.moves;
            
            const accuracy = gameState.moves > 0 ? Math.round((gameState.matchedPairs / gameState.moves) * 100) : 0;
            document.getElementById('accuracy').textContent = `${accuracy}%`;
            
            const score = gameState.matchedPairs * 100 - gameState.moves * 5;
            document.getElementById('score').textContent = Math.max(0, score);
        }

        function completeGame() {
            clearInterval(gameTimer);
            gameTimer = null;
            
            document.getElementById('pause-btn').style.display = 'none';
            document.getElementById('stop-btn').style.display = 'none';
            document.getElementById('save-btn').style.display = 'inline-block';
            document.getElementById('stats-btn').style.display = 'inline-block';
            
            // Guardar juego
            saveGameData();
            
            // Mostrar mensaje de felicitaci√≥n
            alert(`¬°Felicidades! Completaste el juego en ${Math.floor(gameTime / 60)}:${(gameTime % 60).toString().padStart(2, '0')} con ${gameState.moves} movimientos!`);
        }

        function saveGameData() {
            const game = {
                difficulty: currentDifficulty,
                time: gameTime,
                moves: gameState.moves,
                pairs: gameState.matchedPairs,
                score: gameState.matchedPairs * 100 - gameState.moves * 5,
                timestamp: new Date().toISOString()
            };
            
            gameData.push(game);
            localStorage.setItem('memoryGameData', JSON.stringify(gameData));
        }

        function saveGame() {
            alert('¬°Juego guardado exitosamente!');
        }

        function viewStats() {
            const totalGames = gameData.length;
            const bestTime = gameData.length > 0 ? 
                Math.min(...gameData.map(game => game.time)) : 0;
            const averageScore = gameData.length > 0 ? 
                Math.round(gameData.reduce((sum, game) => sum + game.score, 0) / gameData.length) : 0;
            
            document.getElementById('games-completed').textContent = totalGames;
            document.getElementById('best-time').textContent = bestTime > 0 ? 
                `${Math.floor(bestTime / 60)}:${(bestTime % 60).toString().padStart(2, '0')}` : '-';
            document.getElementById('average-score').textContent = averageScore;
            document.getElementById('current-streak').textContent = '0 d√≠as';
            
            document.getElementById('stats').style.display = 'grid';
        }

        function resetGame() {
            gameState.isGameActive = false;
            gameTime = 0;
            isPaused = false;
            
            if (gameTimer) {
                clearInterval(gameTimer);
                gameTimer = null;
            }
            
            document.getElementById('start-btn').style.display = 'inline-block';
            document.getElementById('pause-btn').style.display = 'none';
            document.getElementById('stop-btn').style.display = 'none';
            document.getElementById('save-btn').style.display = 'none';
            document.getElementById('stats-btn').style.display = 'none';
            document.getElementById('game-info').style.display = 'none';
            document.getElementById('stats').style.display = 'none';
            
            // Resetear cartas
            document.querySelectorAll('.memory-card').forEach(card => {
                card.textContent = '?';
                card.classList.remove('flipped', 'matched', 'wrong');
            });
            
            // Resetear estado
            gameState.cards.forEach(card => {
                card.isFlipped = false;
                card.isMatched = false;
            });
            gameState.flippedCards = [];
            gameState.matchedPairs = 0;
            gameState.moves = 0;
        }
    </script>
</body>
</html>
